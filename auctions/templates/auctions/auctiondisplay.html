{% extends "auctions/layout.html" %}

{% block body %}

{% if auctiondisplay.openess == False %}
<div class="alert alert-info" role="alert">
    Auction Closed!
</div>
{% endif %}


<h1>{{auctiondisplay.title}}</h1>


<div>
    <img src="{{auctiondisplay.image}}" class="img-fluid img-thumbnail" style="max-width: 35%;" alt="BLANK">
    <h3>{{auctiondisplay.title}}</h3>
    <h2>
        <p>{{auctiondisplay.descript}}<br>PRICE: ${{auctiondisplay.price}}<br>{{auctiondisplay.category}} </p>
    </h2>

    <!--
    BOTOES DE WISH AND UNWISH
    -->
    {% if onwithlist and auctiondisplay.openess %}
    <p>
    <form action="{% url 'wishlist' auctiondisplay.id  %}" method="POST" style="padding:2%;">
        {% csrf_token %}
        <input class="form-check-input" type="submit" value="Add to wishlist" style="margin:2%;">
    </form>
    </p>
    {% elif auctiondisplay.openess == False %}
    {% else %}
    <p>
    <form action="{% url 'unwishlist' auctiondisplay.id  %}" method="POST" style="padding:2%;">
        {% csrf_token %}
        <input class="form-check-input" type="submit" value="UnWish" style="margin:2%;">
    </form>
    </p>
    {% endif %}

    {%if endauction and auctiondisplay.openess %}
    <p>
    <form action="{% url 'endauction' auctiondisplay.id  %}" method="POST" style="padding:2%;">
        {% csrf_token %}
        <input class="form-check-input" type="submit" value="endauction" style="margin:2%;">
    </form>
    </p>
    {% endif %}


    {% if user.id and auctiondisplay.openess %}
    <form action="{% url 'newcomment' auctiondisplay.id  %}" method="POST">
        {% csrf_token %}
        <div>{{comment.commentarea}}
            <input type="submit" value="Comment" style="margin: 2%;">
        </div>
    </form>
    {% elif auctiondisplay.openess == False %}
    <br>
    <h1>Auction Closed - no further comments alowed</h1>
    {% else %}
    <h2>
        <p><br><a class="alert alert-secondary" href="{% url 'login' %}" style="color: rgb(92, 0, 0);">Comment</a>
    </h2><br>
    </p>
    {% endif %}

    {% for comm in commentsall %}
    {% if comm.auction == auctiondisplay %}
    <h6 class="border" style="max-width: 50%;">
        <p> {{ comm.commentarea }} <br> by {{ comm.usercomment }}
            <br>
            <cite style="font-size: 75%;">{{ comm.datecreate }}</cite>
        </p>
    </h6>
    {% endif %}
    {% endfor %}

</div>
<div>
    {% if user.id and auctiondisplay.openess %}
    <form action="{% url 'newbiding' auctiondisplay.id %}" method="POST">
        {% csrf_token %}
        {{ BidsForm.bid }}
        <input type="submit" value="bid" style="margin: 2%;">
    </form>
    {% elif auctiondisplay.openess == False %}
    <br>
    <h1>Auction Closed - no further bidding alowed</h1>
    {% else %}
    <h2>
        <p><br><a class="alert alert-secondary" href="{% url 'login' %}" style="color: rgb(92, 0, 0);">Make a
                Bid</a>
    </h2><br>
    </p>


    {% endif %}
    {% for bids in bidsall %}
    {% if bids.auction.id == auctiondisplay.id %}
    <h4 class="border" style="max-width: 50%;">Bid: {{bids.bid}} for the "{{bids.auction.title}}" <br>
        by {{bids.userbid}}
        <br><cite style="font-size: 75%;">{{ bids.datecreate }}</cite>
    </h4>

    {% endif %}
    {% endfor %}
</div>

{% endblock %}